<!DOCTYPE html>
<html>
	<head>

		<meta charset="utf-8">
		<title>pH visualizer</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>
		<link rel="stylesheet" href="main.css">

	</head>

	<body>
		<div id="main">
			<div id="value">
				hello
			</div>
		</div>

		<script>
			var socket = {},
				value = {},
				main = {},
				color = {},
				val = 0;
			
			socket = new WebSocket("ws://127.0.0.1:8080");
			value = document.getElementById("value");
			main = document.getElementById("main");


			socket.onmessage = function receiveMessage(event) {
				console.log(event.data);
				value.innerHTML = event.data;
				val = (event.data * 300) / 14.0
				color = chroma.hsl(val, 0.5, 0.5);
				main.style.backgroundColor = color;
			}


		</script>





	</body>
</html>